// ----------------------------------------------- //
//                      CONSTS                     //
// ----------------------------------------------- //

const TelegramBot = require('node-telegram-bot-api');
const token = '528204586:AAHYdc-qE63y_1DSsdr6NP-xCoRH4Ds2QWI';
const bot = new TelegramBot(token, {polling: true});
var fs = require('fs');
var key = JSON.parse(fs.readFileSync('keys.json', 'utf8'));
var group = "KN41";
var options = {
    reply_markup: JSON.stringify({
        inline_keyboard: [
            [{ text: 'ÐšÐ-41', callback_data: 'KN41' }],
            [{ text: 'ÐšÐ-42', callback_data: 'KN42' }],
            [{ text: 'ÐšÐ-21', callback_data: 'KN21' }]
        ],
        parse_mode: 'Markdown'
    })
};

// ----------------------------------------------- //
//                     POZKLAD                     //
// ----------------------------------------------- //

let KN41 = {
    monday : [ 
        [ 8, 00, "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†. Ð°Ð»Ð³Ð¾Ñ€.", "Ð”Ð¾Ñ€Ð¾Ñˆ Ð’.Ð†.", 2303 ],
        [ 9, 35, "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†. Ð°Ð»Ð³Ð¾Ñ€.", "Ð”Ð¾Ñ€Ð¾Ñˆ Ð’.Ð†.", 2305 ],
        [ 11, 10, "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†Ñ–Ð¹Ð½Ñ– Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸", "ÐšÐ¾Ð¼Ð°Ñ€ Ðœ.ÐŸ.", 2304 ]],
    tuesday : [
        [ 12, 50, "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2304 ],
        [ 14, 25, "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2303 ],
        [ 16, 00, "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž. Ðœ.", 2303]],
    wednesday : [
        [ 11, 10, "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ.", 2303 ],
        [ 12, 50, "Ð†Ð½Ñ‚ÐµÐ»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¾-Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ñ– ÑÐ¸ÑÑ‚.", "ÐžÑÐ¾Ð»Ñ–Ð½ÑÑŒÐºÐ¸Ð¹ Ðž.Ð .", 2303 ],
        [ 14, 25, "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2304 ],
        [ 16, 00, "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2303 ]], // 1/2 Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ
    thursday : [
        [ 12, 50, "Ð†Ð½Ñ‚ÐµÐ»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¾-Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ñ– ÑÐ¸ÑÑ‚.", "ÐšÐ¾Ð²Ð°Ð»ÑŒ Ð’.Ð¡.", 1210 ],
        [ 14, 25, "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž.Ðœ.", 1210 ],
        [ 16, 00, "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2304 ]], // 1/2 Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ
    friday : [ 
        [ 12, 50, "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2304 ],
        [ 14, 25, "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2303 ],
        [ 16, 00, "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž. Ðœ.", 2303 ]]
}; //done
let KN42 = {
    monday : [ 
        ["8:00", "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†. Ð°Ð»Ð³Ð¾Ñ€.", "Ð”Ð¾Ñ€Ð¾Ñˆ Ð’.Ð†.", 2303 ],
        ["9:35", "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†. Ð°Ð»Ð³Ð¾Ñ€.", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2303 ],
        ["11:10", "ÐÐµÐ¹Ñ€Ð¾Ð½Ð½Ñ– Ð¼ÐµÑ€ÐµÐ¶Ñ– Ñ‚Ð° ÐµÐ²Ð¾Ð»ÑŽÑ†Ñ–Ð¹Ð½Ñ– Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸", "ÐšÐ¾Ð¼Ð°Ñ€ Ðœ.ÐŸ.", 2304 ]],
    tuesday : [
        ["12:50", "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2304 ],
        ["14:25", "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2303 ],
        ["16:00", "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž. Ðœ.", 2303]],
    wednesday : [
        ["11:10", "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ.", 2303 ],
        ["12:50", "Ð†Ð½Ñ‚ÐµÐ»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¾-Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ñ– ÑÐ¸ÑÑ‚.", "ÐžÑÐ¾Ð»Ñ–Ð½ÑÑŒÐºÐ¸Ð¹ Ðž.Ð .", 2303 ],
        ["14:25", "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2304 ],
        ["16:00", "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2303 ]], // 1/2 Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ
    thursday : [
        ["12:50", "Ð†Ð½Ñ‚ÐµÐ»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ– Ñ€Ð¾Ð±Ð¾Ñ‚Ð¾-Ñ‚ÐµÑ…Ð½Ñ–Ñ‡Ð½Ñ– ÑÐ¸ÑÑ‚.", "ÐšÐ¾Ð²Ð°Ð»ÑŒ Ð’.Ð¡.", 1210 ],
        ["14:25", "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž.Ðœ.", 1210 ],
        ["16:00", "ÐŸÑ€Ð¾ÐµÐºÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð†Ð¡", "Ð’Ð°ÑÐ¸Ð»ÑŒÐºÑ–Ð² Ð.Ðœ." , 2304 ]], // 1/2 Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ
    friday : [ 
        ["12:50", "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2304 ],
        ["14:25", "Ð¢ÐµÐ¾Ñ€Ñ–Ñ Ð¿Ñ€Ð¸Ð¹Ð½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆÐµÐ½ÑŒ", "Ð›ÐµÐ½Ð´ÑŽÐº Ð¢.Ð’.", 2303 ],
        ["16:00", "ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¸Ñ… Ð¿Ñ€Ð¸ÑÑ‚Ñ€Ð¾Ñ—Ð²", "Ð—Ð°ÑÑ‚Ð°Ð²Ð½Ð¸Ð¹ Ðž. Ðœ.", 2303]]
};
let KN21 = {
    monday : [ 
        ["9:35", "ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸ Ñ– ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸ Ð´Ð°Ð½Ð¸Ñ…(Ð»ÐµÐºÑ†Ñ–Ñ)", "ÐšÐ¾Ð²Ð°Ð»ÑŒ Ð’.Ð¡.", 6207 ],
        ["11:10", "Ð‘Ð°Ð·Ð¸ Ñ– ÑÑ…Ð¾Ð²Ð¸Ñ‰Ð° Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 6104 ],
        ["12:50", "ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ð¸ Ñ– ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸ Ð´Ð°Ð½Ð¸Ñ…", "Ð›Ñ–Ð¿'ÑÐ½Ñ–Ð½Ð°-Ð“Ð¾Ð½Ñ‡Ð°Ñ€ÐµÐ½ÐºÐ¾ Ð¥.Ð’.", 6201 ]],
    tuesday : [
        ["9:35", "Ð¡ÑƒÑ‡Ð°ÑÐ½Ñ– Ð¿Ð°Ñ€Ð°Ð´Ð¸Ð³Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ", "Ð‘Ð¸ÐºÐ¾Ð²Ð¸Ð¹ ÐŸ.Ð„.", 2303  ],
        ["11:10", "Ð¡ÑƒÑ‡Ð°ÑÐ½Ñ– Ð¿Ð°Ñ€Ð°Ð´Ð¸Ð³Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ", "Ð‘Ð¸ÐºÐ¾Ð²Ð¸Ð¹ ÐŸ.Ð„.", 2302 ],
        ["12:50", "Ð‘Ð°Ð·Ð¸ Ñ– ÑÑ…Ð¾Ð²Ð¸Ñ‰Ð° Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 2303]],
    wednesday : [
        ["8:00", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¸Ð¹ Ð°Ð½Ð°Ð»Ñ–Ð·(Ð»ÐµÐºÑ†Ñ–Ñ)", "Ð‘Ð¾Ð´Ð½Ð°Ñ€ Ð”.Ð†.", 6207 ],
        ["9:35", "ÐœÐ°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡Ð½Ð¸Ð¹ Ð°Ð½Ð°Ð»Ñ–Ð·", "Ð‘Ð¾Ð´Ð½Ð°Ñ€ Ð”.Ð†.", 6307 ],
        ["11:10", "Ð†Ð½Ð¾Ð·ÐµÐ¼Ð½Ð° Ð¼Ð¾Ð²Ð°", "Ð¨Ñ‚Ð¾Ñ…Ð¼Ð°Ð½ Ð›.Ðœ." , 6502 ]],
    thursday : [
        ["8:00", "Ð¡ÑƒÑ‡Ð°ÑÐ½Ñ– Ð¿Ð°Ñ€Ð°Ð´Ð¸Ð³Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ", "Ð‘Ð¸ÐºÐ¾Ð²Ð¸Ð¹ ÐŸ.Ð„.", 2303 ], // 1/2 Ñ‚Ð¸Ð¶Ð´ÐµÐ½ÑŒ
        ["9:35", "ÐšÐ¾Ð¼Ð¿. Ð³Ñ€Ð°Ñ„Ñ–ÐºÐ° Ñ‚Ð° Ñ‚ÐµÑ…Ð½. Ð²Ñ–Ð·ÑƒÐ°Ð»Ñ–Ð·. Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 2302 ],
        ["11:10", "ÐšÐ¾Ð¼Ð¿. Ð³Ñ€Ð°Ñ„Ñ–ÐºÐ° Ñ‚Ð° Ñ‚ÐµÑ…Ð½. Ð²Ñ–Ð·ÑƒÐ°Ð»Ñ–Ð·. Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 2303 ],
        ["12:50", "Ð‘Ð°Ð·Ð¸ Ñ– ÑÑ…Ð¾Ð²Ð¸Ñ‰Ð° Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 2303 ]],
    friday : [ 
        ["9:35", "Ð¡ÑƒÑ‡Ð°ÑÐ½Ñ– Ð¿Ð°Ñ€Ð°Ð´Ð¸Ð³Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ", "Ð‘Ð¸ÐºÐ¾Ð²Ð¸Ð¹ ÐŸ.Ð„.", 2303  ],
        ["11:10", "Ð¡ÑƒÑ‡Ð°ÑÐ½Ñ– Ð¿Ð°Ñ€Ð°Ð´Ð¸Ð³Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ", "Ð‘Ð¸ÐºÐ¾Ð²Ð¸Ð¹ ÐŸ.Ð„.", 2302 ],
        ["12:50", "Ð‘Ð°Ð·Ð¸ Ñ– ÑÑ…Ð¾Ð²Ð¸Ñ‰Ð° Ð´Ð°Ð½Ð¸Ñ…", "Ð¢ÑƒÑ€Ñ‡ÐµÐ½ÐºÐ¾ Ð†.Ð’.", 2303]],
}; //done

// ----------------------------------------------- //
//                    FUNCTIONS                    //
// ----------------------------------------------- //

function noGroup(id) {
    bot.sendMessage(id, "Ð”Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‰Ð¾Ð± Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ð´Ð°Ð½Ñƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ, Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ð¾ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸ Ð³Ñ€ÑƒÐ¿Ñƒ /start");
}

function numToEn(num){
   var result;
    switch (num) {
        case 1: {
            result = "monday"
            break;
        }
        case 2: {
            result = "tuesday"
            break;
        }
        case 3: {
            result = "wednesday"
            break;
        }
        case 4: {
            result = "thursday"
            break;
        }
        case 5: {
            result = "friday"
            break;
        }
        default: {
            result = "weekend"
            break;
        }
    }
    return result;
}

function numToUkr(num){
    var result;
     switch (num) {
         case 1: {
             result = "ÐŸÐ¾Ð½ÐµÐ´Ñ–Ð»Ð¾Ðº"
             break;
         }
         case 2: {
             result = "Ð’Ñ–Ð²Ñ‚Ð¾Ñ€Ð¾Ðº"
             break;
         }
         case 3: {
             result = "Ð¡ÐµÑ€ÐµÐ´Ñƒ"
             break;
         }
         case 4: {
             result = "Ð§ÐµÑ‚Ð²ÐµÑ€"
             break;
         }
         case 5: {
             result = "ÐŸÑÑ‚Ð½Ð¸Ñ†ÑŽ"
             break;
         }
         default: {
             result = "Ð’Ð¸Ñ…Ñ–Ð´Ð½Ð¸Ð¹"
             break;
         }
     }
     return result;
}

function getNextOne(id, group) {
    var a, p, v, d1, d2, day;

    if (group) {
        var now = new Date();
        if ( (now.getDay() == 6) || (now.getDay() == 7) || ( (now.getDay() == 5) && (now.getHours() > eval( group + ".friday[" + eval( group + ".friday.length - 1") + "][0]" )) )) {
            d1 = eval( group + ".monday[0][0]" );
            d2 = eval( group + ".monday[0][1]" );
            p = eval( group + ".monday[0][2]" );
            v = eval( group + ".monday[0][3]" );
            a = eval( group + ".monday[0][4]" );
            day = "ÐŸÐ¾Ð½ÐµÐ´Ñ–Ð»Ð¾Ðº";
        } else {
            if ( now.getHours() < eval( group + "." + numToEn(now.getDay()) + "[0][0]" ) ) { // Ð‘ÑƒÐ´Ð½Ñ– Ð´Ð¾ 1 Ð¿Ð°Ñ€Ð¸
                d1 = eval( group + "." + numToEn(now.getDay()) + "[0][0]" );
                d2 = eval( group + "." + numToEn(now.getDay()) + "[0][1]" );
                p = eval( group + "." + numToEn(now.getDay()) + "[0][2]" );
                v = eval( group + "." + numToEn(now.getDay()) + "[0][3]" );
                a = eval( group + "." + numToEn(now.getDay()) + "[0][4]" );
                day = numToUkr(now.getDay());
            }
            if (now.getHours() > eval( group + "." + numToEn(now.getDay()) + "[" + eval( group + "." + numToEn(now.getDay()) + ".length - 1") + "][0]" )) { // Ð‘ÑƒÐ´Ð½Ñ– Ð¿Ñ–ÑÐ»Ñ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ñ— Ð¿Ð°Ñ€Ð¸
                d1 = eval( group + "." + numToEn(now.getDay()+1) + "[0][0]" );
                d2 = eval( group + "." + numToEn(now.getDay()+1) + "[0][1]" );
                p = eval( group + "." + numToEn(now.getDay()+1) + "[0][2]" );
                v = eval( group + "." + numToEn(now.getDay()+1) + "[0][3]" );
                a = eval( group + "." + numToEn(now.getDay()+1) + "[0][4]" );
                day = numToUkr((now.getDay()) + 1);

            }
            // if (  ) { // Ð¯ÐºÑ‰Ð¾ Ð´Ð°Ð½Ð¸Ð¹ Ñ‡Ð°Ñ Ð±Ñ–Ð»ÑŒÑˆÐµ Ð¿ÐµÑ€ÑˆÐ¾Ñ— Ð¿Ð°Ñ€Ð¸ Ñ– Ð¼ÐµÐ½ÑˆÐµ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ñ— Ð¿Ð°Ñ€Ð¸
            //     d1 = eval( group + "." + numToEn(now.getDay()+1) + "[0][0]" );
            //     d2 = eval( group + "." + numToEn(now.getDay()+1) + "[0][1]" );
            //     p = eval( group + "." + numToEn(now.getDay()+1) + "[0][2]" );
            //     v = eval( group + "." + numToEn(now.getDay()+1) + "[0][3]" );
            //     a = eval( group + "." + numToEn(now.getDay()+1) + "[0][4]" );
            //     day = numToUkr(now.getDay());
            // }
        }
        d2 == 0 ? d2 = "00" : d2;
        bot.sendMessage(id, "Ð’Ð°ÑˆÐ° Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð° Ð¿Ð°Ñ€Ð° Ð² *" + day + "*" + "\nðŸ“š *" + p + "*\nðŸ•” ÐŸÐ¾Ñ‡Ð°Ñ‚Ð¾Ðº Ð¾ " + d1 + ":" + d2 + "\nðŸšª ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ â„–" + a + "\nðŸ‘¨â€ðŸ‘¦ Ð’Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡: " + v, { parse_mode: "Markdown" } );
    } else {
        noGroup(id);
    }
}

function getNextDay (id, group) {
    var a, p, v, d1, d2, day;

    if (group) {
        var now = new Date();
        if ( (now.getDay() == 6) || (now.getDay() == 7) || ( (now.getDay() == 5) && (now.getHours() > eval( group + ".friday[" + eval( group + ".friday.length - 1") + "][0]" )) )) {
            d1 = eval( group + ".monday[0][0]" );
            d2 = eval( group + ".monday[0][1]" );
            p = eval( group + ".monday[0][2]" );
            v = eval( group + ".monday[0][3]" );
            a = eval( group + ".monday[0][4]" );
            day = "Ð² ÐŸÐ¾Ð½ÐµÐ´Ñ–Ð»Ð¾Ðº";
        } else {
            if ( now.getHours() < eval( group + "." + numToEn(now.getDay()) + "[0][0]" ) ) { // Ð‘ÑƒÐ´Ð½Ñ– Ð´Ð¾ 1 Ð¿Ð°Ñ€Ð¸
                d1 = eval( group + "." + numToEn(now.getDay()) + "[0][0]" );
                d2 = eval( group + "." + numToEn(now.getDay()) + "[0][1]" );
                p = eval( group + "." + numToEn(now.getDay()) + "[0][2]" );
                v = eval( group + "." + numToEn(now.getDay()) + "[0][3]" );
                a = eval( group + "." + numToEn(now.getDay()) + "[0][4]" );
                day = "Ð² " + numToUkr(now.getDay());
            }
            if (now.getHours() > eval( group + "." + numToEn(now.getDay()) + "[" + eval( group + "." + numToEn(now.getDay()) + ".length - 1") + "][0]" )) { // Ð‘ÑƒÐ´Ð½Ñ– Ð¿Ñ–ÑÐ»Ñ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ñ— Ð¿Ð°Ñ€Ð¸
                d1 = eval( group + "." + numToEn(now.getDay()+1) + "[0][0]" );
                d2 = eval( group + "." + numToEn(now.getDay()+1) + "[0][1]" );
                p = eval( group + "." + numToEn(now.getDay()+1) + "[0][2]" );
                v = eval( group + "." + numToEn(now.getDay()+1) + "[0][3]" );
                a = eval( group + "." + numToEn(now.getDay()+1) + "[0][4]" );
                day = "Ð² " + numToUkr((now.getDay()) + 1);

            }
                d1 = eval( group + "." + numToEn(now.getDay()+1) + "[0][0]" );
                d2 = eval( group + "." + numToEn(now.getDay()+1) + "[0][1]" );
                p = eval( group + "." + numToEn(now.getDay()+1) + "[0][2]" );
                v = eval( group + "." + numToEn(now.getDay()+1) + "[0][3]" );
                a = eval( group + "." + numToEn(now.getDay()+1) + "[0][4]" );
                day = numToUkr("Ð¡ÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–");
        
        }
        d2 == 0 ? d2 = "00" : d2;
        bot.sendMessage(id, "Ð’Ð°ÑˆÐ° Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð° Ð¿Ð°Ñ€Ð° *" + day + "*" + "\nðŸ“š *" + p + "*\nðŸ•” ÐŸÐ¾Ñ‡Ð°Ñ‚Ð¾Ðº Ð¾ " + d1 + ":" + d2 + "\nðŸšª ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ â„–" + a + "\nðŸ‘¨â€ðŸ‘¦ Ð’Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡: " + v, { parse_mode: "Markdown" } );
    } else {
        noGroup(id);
    }
}
// ----------------------------------------------- //
//                  USER INTERACTION               //
// ----------------------------------------------- //

bot.on("polling_error", (e) => console.log(e));
bot.onText(/start/, (msg, match) => {
        bot.sendMessage(msg.chat.id, "ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ ÑÐ²Ð¾ÑŽ Ð³Ñ€ÑƒÐ¿Ñƒ", options);
        bot.on('callback_query', (q) => {
            group = q.data;
            bot.sendMessage(msg.chat.id, "Ð’Ð¸ Ð¾Ð±Ñ€Ð°Ð»Ð¸: *" + q.data + "*", {parse_mode: "Markdown"} )
        });
});

bot.onText(/file/, (msg, match) => {
    if (group) {
        if (group == "KN41") {
            bot.forwardMessage(msg.chat.id, 413671312, 3161);
            } else {
                bot.sendMessage(msg.chat.id, "Ð’ Ð±Ð°Ð·Ñ– Ð±Ð¾Ñ‚Ð° Ð² Ð½Ð°ÑÐ²Ð½Ð¾ÑÑ‚Ñ– Ñ‚Ñ–Ð»ÑŒÐºÐ¸ ÐšÐ-31, ÑÐºÑ‰Ð¾ Ñƒ Ð²Ð°Ñ Ñ” Ñ„Ð°Ð¹Ð» Ð· Ñ€Ð¾Ð·ÐºÐ»Ð°Ð´Ð¾Ð¼ Ð´Ð»Ñ ÑÐ²Ð¾Ð³Ð¾ ÐºÑƒÑ€ÑÑƒ, Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ñ‚Ðµ, Ð±ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ° ÑÑŽÐ´Ð¸ @kova1");
            }
    } else {
        noGroup(msg.chat.id);
    }
    });

bot.onText(/\/f (.+)/, function (msg, match) {
    var fromId = msg.from.id;
    var resp = match[1];
    if (resp == "41") {
        bot.forwardMessage(msg.chat.id, 413671312, 3161);
    } else {
        bot.sendMessage(msg.chat.id, "Ð’ Ð±Ð°Ð·Ñ– Ð±Ð¾Ñ‚Ð° Ð² Ð½Ð°ÑÐ²Ð½Ð¾ÑÑ‚Ñ– Ñ‚Ñ–Ð»ÑŒÐºÐ¸ ÐšÐ-41, ÑÐºÑ‰Ð¾ Ñƒ Ð²Ð°Ñ Ñ” Ñ„Ð°Ð¹Ð» Ð· Ñ€Ð¾Ð·ÐºÐ»Ð°Ð´Ð¾Ð¼ Ð´Ð»Ñ ÑÐ²Ð¾Ð³Ð¾ ÐºÑƒÑ€ÑÑƒ, Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ñ‚Ðµ, Ð±ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ° ÑÑŽÐ´Ð¸ @kova1");
    }
    }
);

bot.onText(/next/, (msg, match) => {
    getNextOne(msg.chat.id, group);
});

bot.onText(/test/, (msg, match) => {
    bot.sendMessage(msg.chat.id, now.getHours());
});

// MY OWN COMMANDS

bot.onText(/who/, (msg, match) => {
    bot.sendMessage(msg.chat.id, 'Ð’Ð¸ Ð½Ðµ Ð¿Ñ€Ð¾Ñ—Ð±ÐµÑ‚Ðµ');
});